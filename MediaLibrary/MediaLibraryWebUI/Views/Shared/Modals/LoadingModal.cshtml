@using MediaLibraryWebUI.Repositories

<div class="modal" id="@(HtmlControlsRepository.LoadingModalId)" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static"
     data-keyboard="false">
    <div class="modal-dialog modal-dialog-centered justify-content-center">
        <div class="spinner-border" role="status">
            <span class="sr-only">Loading...</span>
        </div>
    </div>
</div>

<script type="text/javascript">
    function showLoading() {
        var $modal = $('#@(HtmlControlsRepository.LoadingModalId)'),
            processCount = parseInt($modal.attr('data-process-count'));

        if (!isNaN(processCount)) {
            $modal.attr('data-process-count', processCount++);
        } else {
            $modal.attr('data-process-count', 1);
        }

        $modal.modal('show');
    }

    function hideLoading() {
        var $modal = $('#@(HtmlControlsRepository.LoadingModalId)'),
            processCount = parseInt($modal.attr('data-process-count'));

        if (!isNaN(processCount)) {
            $modal.attr('data-process-count', processCount--);

            if (processCount == 0) /*then*/ $modal.modal('hide');
        } else {
            $modal.attr('data-process-count', 0);
        }
    }
</script>